"use strict";
/* global requirejs */
/* eslint-disable no-console */
/**
  Script to be included in projects websites
  that are generated by query/projects.php
*/
(function(){
  var local = window.location.href.match(/(.*)\/projects\/[^\/]+/);
  if(local && requirejs){
    //Included on our side, via requirejs
    requirejs.config({
      baseUrl: '../js'
    , paths: {
        'jquery': 'extern/jquery.min'
      , 'underscore': 'extern/underscore-min'
      }
    , shim: {
        'jquery': {exports: '$'}
      , 'underscore': {exports: '_'}
      }
    });
    requirejs(['jquery'], function($){
      var sendTo = $('#projectFrame').attr('src');
      console.log('Target alive at:\t'+sendTo);
      $('#projectFrame').load(function(){
        console.log('Target loaded!');
      });
    });
  }else{
    //Included from somewhere else.
    console.log('Marderschaden!');
  }
})();
